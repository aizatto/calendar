(this.webpackJsonpschedule=this.webpackJsonpschedule||[]).push([[0],{14:function(e,t,n){e.exports=n(27)},19:function(e,t,n){},27:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(13),l=n.n(i),c=(n(19),n(4)),o=n.n(c),s=n(10),u=(n(21),r.a.createContext({authenticated:!1})),m=n(36),d=n(34),p=n(30),g=n(31),f=n(32),h=n(35),v=n(33),E=n(11),y=n.n(E),T=n(6),w=new Date,I=p.a(w),O=g.a(f.a(w,5)),_=function(e){var t=e.event;if(!t.attendees||!t.attendees.length)return r.a.createElement(r.a.Fragment,null);var n=t.attendees.sort((function(e,t){return e.displayName&&!t.displayName?1:!e.displayName&&t.displayName?-1:e.email.localeCompare(t.email)})),a=n.filter((function(e){return"declined"===e.responseStatus})),i=n.map((function(e){var n="declined"===e.responseStatus?{textDecoration:"line-through"}:{},a=e.displayName?e.displayName:e.email;return r.a.createElement("li",{key:"".concat(t.id,":").concat(e.email),style:n,title:"".concat(a,": ").concat(e.responseStatus)},a)}));return r.a.createElement(r.a.Fragment,null,"Attendees: ",n.length-a.length,"/",n.length,r.a.createElement("ol",null,i))},S=function(e){var t=e.event;if(!t.start.dateTime||!t.end.dateTime)return r.a.createElement(r.a.Fragment,null);var n=new Date(t.start.dateTime),a=new Date(t.end.dateTime);return r.a.createElement("span",{title:"".concat(t.start.dateTime," - ").concat(t.end.dateTime)},h.a(n,"HH:mm")," - ",h.a(a,"HH:mm"))},j=function(e){var t=e.intervals.map((function(e){var t=(e.end.getTime()-e.start.getTime())/1e3;return r.a.createElement("li",{key:e.start.toISOString()},h.a(e.start,"HH:mm")," - ",h.a(e.end,"HH:mm"),": ",k(t))}));return r.a.createElement("ol",null,t)},k=function(e){var t=Math.floor(e/3600),n=Math.floor(e/60)%60,a=[];return t>1?a.push("".concat(t," hours")):1===t&&a.push("".concat(t," hour")),n>1?a.push("".concat(n," minutes")):1===n&&a.push("".concat(n," minute")),a.join(" ")},A=function(e){var t=e.event,n=t.hangoutLink?r.a.createElement("a",{href:t.hangoutLink},"Hangout Link"):r.a.createElement("span",{style:{textDecoration:"line-through"}},"Hangout Link"),a=t.location?r.a.createElement("div",null,t.location):null;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement(S,{event:t})," ",r.a.createElement("a",{href:t.htmlLink},t.summary)),a,r.a.createElement(_,{event:t}),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:t.description}}),n)},D=function(e){var t=Object(a.useState)([]),n=Object(s.a)(t,2),i=n[0],l=n[1];Object(a.useEffect)((function(){!function(){var e;o.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.awrap(gapi.client.calendar.events.list({calendarId:"primary",timeMin:I.toISOString(),timeMax:O.toISOString(),maxResults:100,orderBy:"startTime",singleEvents:!0}));case 2:e=t.sent,l(e.result.items);case 4:case"end":return t.stop()}}))}()}),[]);var c=i.filter((function(e){return"cancelled"!==e.status&&(!e.end.dateTime||!v.a(new Date(e.end.dateTime),I))})),u=y.a.groupBy(c,(function(e){return e.start.dateTime?p.a(new Date(e.start.dateTime)):null})),m=y.a.map(u,(function(e,t){var n=new Date(t),a=e.filter((function(e){return e.start.dateTime&&e.end.dateTime})).map((function(e){return{start:new Date(e.start.dateTime),end:new Date(e.end.dateTime)}})),i=T.mergeIntervals(a),l=T.oppositeIntervals({start:p.a(n),end:g.a(n)},i),c=e.map((function(e){return r.a.createElement("li",{key:e.id,style:{paddingBottom:"1rem"}},r.a.createElement(A,{event:e}))}));return r.a.createElement(r.a.Fragment,{key:t},r.a.createElement("h5",null,h.a(n,"EEEE yyyy-MM-dd")),"Busy: ",k(T.intervalsTotal(i)/1e3),r.a.createElement(j,{intervals:i}),"Free: ",k(T.intervalsTotal(l)/1e3),r.a.createElement(j,{intervals:l}),"Schedule: ",c.length,r.a.createElement("ol",null,c))}));return r.a.createElement(r.a.Fragment,null,m)},P=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(u.Consumer,null,(function(e){return e.authenticated?r.a.createElement(D,null):r.a.createElement(r.a.Fragment,null,"Not Authenticated")})))},N=function(){var e=Object(a.useState)(!1),t=Object(s.a)(e,2),n=t[0],i=t[1];Object(a.useEffect)((function(){var e=document.createElement("script");e.src="https://apis.google.com/js/api.js",e.async=!0,e.defer=!0;var t=function(){var e,t,n,a;return o.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return e=["https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest"],t=["https://www.googleapis.com/auth/calendar.events.readonly","https://www.googleapis.com/auth/calendar.readonly"].join(" "),r.next=4,o.a.awrap(gapi.client.init({discoveryDocs:e,scope:t,apiKey:Object({NODE_ENV:"production",PUBLIC_URL:"/calendar",REACT_APP_GOOGLE_API_KEY:"AIzaSyDrd9W5QPI2iP7trzJWYpTknUKD_ObdGMI",REACT_APP_GOOGLE_CLIENT_ID:"317291664329-jsm5tlrqdu6r8vtf2feaguhup8h1j7u7.apps.googleusercontent.com"}).REACT_APP_GOOGLE_APP_ID,clientId:"317291664329-jsm5tlrqdu6r8vtf2feaguhup8h1j7u7.apps.googleusercontent.com"}));case 4:(n=gapi.auth2.getAuthInstance()).isSignedIn.listen((function(e){i(e)})),a=n.currentUser.get(),i(a.isSignedIn()),console.log(a.getBasicProfile());case 9:case"end":return r.stop()}}))};e.onload=function(){gapi.load("client:auth2",t)};var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)}),[]);return r.a.createElement(u.Provider,{value:{authenticated:n}},r.a.createElement("div",{className:"App"},n?r.a.createElement(m.a,{onClick:function(){gapi.auth2.getAuthInstance().signOut()}},"Sign out"):r.a.createElement(m.a,{onClick:function(){gapi.auth2.getAuthInstance().signIn({prompt:"select_account"})}},"Sign In")),r.a.createElement(d.a,null,r.a.createElement(P,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(N,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},6:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(26);t.mergeIntervals=function(e){if(e.length<=1)return e;for(var t=[],n=e[0],r=1;r<e.length;r++){var i=e[r],l=a.areIntervalsOverlapping(n,i);l||(l=i.start.getTime()-n.end.getTime()===0),l?(n.start=a.isBefore(n.start,i.start)?n.start:i.start,n.end=a.isAfter(n.end,i.end)?n.end:i.end):(t.push(n),n=i)}return t.push(n),t},t.oppositeIntervals=function(e,t){if(0===t.length)return[e];var n=[],r=Object.assign({},e),i=0;if(a.isWithinInterval(r.start,t[0])){if(r.start=t[0].end,a.isWithinInterval(r.end,t[0]))return[];t[1]&&(r.end=t[1].start,i=1)}else r.end=t[0].start,i=0,n.push(r);for(var l=i;l<t.length;l++){var c=t[l],o=t[l+1],s={start:c.end,end:o?o.start:e.end};n.push(s)}return n},t.intervalsTotal=function(e){return e.reduce((function(e,t){return e+t.end.getTime()-t.start.getTime()}),0)}}},[[14,1,2]]]);
//# sourceMappingURL=main.f830c665.chunk.js.map